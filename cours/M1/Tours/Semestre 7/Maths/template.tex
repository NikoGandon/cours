% ======================================================================
%         TEMPLATE LaTeX Pandoc - XeLaTeX Modern (2025)
% ======================================================================

\documentclass[11pt, a4paper]{article}

% ------------------------------------------------------
% FONTS (Best practice for XeLaTeX)
% ------------------------------------------------------
\usepackage{fontspec}
% Polices modernes (très recommandées)
\setmainfont{TeX Gyre Pagella}      % Texte
\setsansfont{TeX Gyre Heros}        % Sans serif
\setmonofont{JetBrains Mono}        % Code (ou autre)


% ------------------------------------------------------
% MICROTYPOGRAPHIE
% ------------------------------------------------------
\usepackage{microtype}


% ------------------------------------------------------
% COULEURS & CODAGE DES LIENS
% ------------------------------------------------------
\usepackage{xcolor}
\definecolor{linkcolor}{HTML}{0A4AA1}
\definecolor{urlcolor}{HTML}{0A4AA1}

\usepackage[
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=urlcolor,
    citecolor=linkcolor
]{hyperref}


% ------------------------------------------------------
% GEOMETRIE & ESPACEMENT
% ------------------------------------------------------
\usepackage[a4paper, margin=2.5cm]{geometry}
\setlength{\parskip}{0.6em}
\setlength{\parindent}{0pt}


% ------------------------------------------------------
% TITRE PANDOC
% ------------------------------------------------------
$if(title)$
    \title{$title$}
$endif$

$if(subtitle)$
    \usepackage{titling}
    \posttitle{\par\large $subtitle$ \par}
$endif$

$if(author)$
    \author{$for(author)$$author$$sep$ \\ $endfor$}
$endif$

$if(date)$
    \date{$date$}
$else$
    \date{}
$endif$


% ------------------------------------------------------
% TABLE OF CONTENTS
% ------------------------------------------------------
\usepackage{tocloft}
\setlength{\cftbeforesecskip}{4pt}

% ------------------------------------------------------
% LISTES (Pandoc good practice)
% ------------------------------------------------------
% Pour éviter le warning \tightlist
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}


% ------------------------------------------------------
% CODE HIGHLIGHTING (Pandoc - avec framed environ.)
% ------------------------------------------------------
\usepackage{fvextra}      % améliore verbatim
\usepackage{minted}       % si Python disponibles, sinon fallback
\usepackage{framed}

% ------------------------------------------------------
% SUPPORT PANDOC CODE HIGHLIGHTING (Highlighting)
% ------------------------------------------------------

% Environment used by Pandoc for syntax highlighting
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
  commandchars=\\\{\},
  breaklines,
  breakanywhere
}

% Environnement Shaded pour Pandoc
\definecolor{shadecolor}{RGB}{245,245,245}
\newenvironment{Shaded}{%
  \begin{snugshade}
}{%
  \end{snugshade}
}

% ------------------------------------------------------
% IMAGES
% ------------------------------------------------------
\usepackage{graphicx}
\usepackage{float}
\graphicspath{{./}}

% ------------------------------------------------------
% HEADER / FOOTER
% ------------------------------------------------------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\thepage}


% ======================================================================
% DOCUMENT
% ======================================================================

\begin{document}

$if(title)$
\maketitle
$endif$

$if(toc)$
{
\setcounter{tocdepth}{2}
\tableofcontents
\newpage
}
$endif$

$body$

\end{document}


